<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-icon-button/core-icon-button.html">
<polymer-element name="myreel-movie-card" attributes="img description rtID movieTitle width height favorite">
<template>
  <style>
    a, a:hover {
      text-decoration: none;
      color: inherit;
    }
    div.movie {
      position: relative;
      width: {{width}};
      height: {{height}};
      padding: 2px;
      margin-bottom: 0px;
      display: inline-block;
    }
    img {
      width: inherit;
      height: inherit;
      padding: inherit;
    }
    core-icon-button {
      width: 50px;
      height: 50px;
      position: absolute;
      background-color: white;
      opacity: 0.5;
    }
    core-icon-button#like {
      bottom: 0px;
      right: 0px;
    }
    core-icon-button#dislike {
      bottom: 0px;
      left: 0px;
    }
  </style>

  <div class="movie" style="text-align:center;">
    <a href="movie/{{ rtID }}">
        <!--{{ movieTitle }}-->
        <img src="{{ img }}">
    </a>
    <core-icon-button id="like" icon="favorite-outline" on-tap="{{favoriteButtonAction}}"></core-icon-button>
  </div>

  <core-ajax
    id="add"
    url="/movie/add/"
    method="POST"
    params="{ 'rt_id': {{ rtID }} }">
  </core-ajax>
  <core-ajax
    id="remove"
    url="/movie/remove/"
    method="POST"
    params="{ 'rt_id': {{ rtID }} }">
  </core-ajax>
</template>
<script>

  Polymer('myreel-movie-card', {
    favorite: false,
    ready: function() {
      if (this.favorite) {
        this.$.like.style.color = '#A10A17';
        this.$.like.style.opacity = '0.8';
        this.$.like.icon = 'favorite';
      }
    },
    favoriteButtonAction: function() {
      if (this.favorite) {
        this.$.remove.go();
        this.favorite = false;
        this.$.like.style.color = '#333';
        this.$.like.style.opacity = '0.5';
        this.$.like.icon = 'favorite-outline';
      } else {
        this.$.add.go();
        this.favorite = true;
        this.$.like.style.color = '#A10A17';
        this.$.like.style.opacity = '0.8';
        this.$.like.icon = 'favorite';
      }
    }
  });

</script>
</polymer-element>
